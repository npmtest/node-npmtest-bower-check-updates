{"/home/travis/build/npmtest/node-npmtest-bower-check-updates/test.js":"/* istanbul instrument in package npmtest_bower_check_updates */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireExampleJsFromReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - post-init\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/lib.npmtest_bower_check_updates.js":"/* istanbul instrument in package npmtest_bower_check_updates */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_bower_check_updates = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_bower_check_updates = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-bower-check-updates && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_bower_check_updates */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_bower_check_updates\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // post-init\n    // run browser js-env code - post-init\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_bower_check_updates.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_bower_check_updates.rollup.js'] =\n            local.assetsDict['/assets.npmtest_bower_check_updates.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_bower_check_updates.__dirname + '/lib.npmtest_bower_check_updates.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/node_modules/bower-check-updates/lib/bower-check-updates.js":"var options = {};\n\n//\n// Dependencies\n//\n\nvar async          = require('async');\nvar cint           = require('cint');\nvar path           = require('path');\nvar closestPackage = require('closest-bower');\nvar _              = require('lodash');\nvar Promise        = require('bluebird');\nvar Table          = require('cli-table');\nvar chalk          = require('chalk');\nvar fs             = Promise.promisifyAll(require('fs'));\nvar vm             = require('./versionmanager');\nvar versionUtil    = require('./version-util');\n\n//\n// Helper functions\n//\n\nfunction print(message) {\n    if (!options.silent) {\n        console.log(message);\n    }\n}\n\nfunction createDependencyTable() {\n    return new Table({\n        colAligns: ['left', 'right', 'right', 'right'],\n        chars: {\n            'top': '',\n            'top-mid': '',\n            'top-left': '',\n            'top-right': '',\n            'bottom': '',\n            'bottom-mid': '',\n            'bottom-left': '',\n            'bottom-right': '',\n            'left': '',\n            'left-mid': '',\n            'mid': '',\n            'mid-mid': '',\n            'right': '',\n            'right-mid': '',\n            'middle': ''\n        }\n    });\n}\n\nvar readPackageFile = cint.partialAt(fs.readFileAsync, 1, 'utf8');\nvar writePackageFile = fs.writeFileAsync;\n\n//\n// Main functions\n//\n\nfunction upgradePackageDefinitions(currentDependencies) {\n    var dependencyList = Object.keys(currentDependencies);\n    return vm.getLatestVersions(dependencyList, {\n        versionTarget: options.greatest ? 'greatest' : 'latest',\n        registry: options.registry ? options.registry : null\n    }).then(function (latestVersions) {\n        var upgradedDependencies = vm.upgradeDependencies(currentDependencies, latestVersions);\n        return [upgradedDependencies, latestVersions];\n    });\n}\n\nfunction analyzeGlobalPackages() {\n    return vm.getInstalledPackages()\n        .then(function (globalPackages) {\n            return upgradePackageDefinitions(globalPackages)\n                .spread(function (upgraded, latest) {\n                    printUpgrades({\n                        current: globalPackages,\n                        upgraded: upgraded,\n                        latest: latest\n                    });\n\n                });\n        });\n}\n\nfunction analyzeProjectDependencies(pkgData, pkgFile) {\n    var pkg = JSON.parse(pkgData);\n    var current = vm.getCurrentDependencies(pkg, {\n        prod: options.prod,\n        dev: options.dev,\n        optional: options.optional,\n        filter: options.args[0]\n    });\n\n    return Promise.all([\n        current,\n        // only search for installed dependencies if a pkgFile is specified\n        pkgFile ? vm.getInstalledPackages() : Promise.resolve(),\n        upgradePackageDefinitions(current)\n    ])\n        .spread(function (current, installed, upgradedAndLatest) {\n            return [current, installed, upgradedAndLatest[0], upgradedAndLatest[1]];\n        })\n        .spread(function (current, installed, upgraded, latest) {\n\n        var output, newPkgData;\n\n        if(options.json) {\n            newPkgData = vm.updatePackageData(pkgData, current, upgraded, latest, options);\n            output = options.jsonAll ? JSON.parse(newPkgData) :\n                options.jsonDeps ? _.pick(JSON.parse(newPkgData), 'dependencies', 'devDependencies', 'optionalDependencies') :\n                upgraded;\n\n            print(output);\n            return output;\n        }\n        else {\n            printUpgrades({\n                installed: installed,\n                current: current,\n                upgraded: upgraded,\n                latest: latest,\n                pkgFile: pkgFile,\n                isUpgrade: options.upgrade\n            });\n\n            if(pkgFile && !_.isEmpty(upgraded)) {\n                if (options.upgrade) {\n                    var newPkgData = vm.updatePackageData(pkgData, current, upgraded, latest, options);\n                    writePackageFile(pkgFile, newPkgData)\n                        .then(function () {\n                            print('Upgraded ' + pkgFile + '\\nUpdate the installed dependencies by running ' + chalk.blue('bower update') + '\\n');\n                        });\n                }\n                        if (options.errorLevel >= 2) {\n                            throw new Error('Dependencies not up-to-date');\n                        }\n                    }\n                }\n        });\n}\n\n/**\n * @param args.from\n * @param args.to\n * @param options.greatest\n */\nfunction toDependencyTable(args, options) {\n\n    options = options || {};\n    var table = createDependencyTable();\n    var rows = Object.keys(args.to).map(function (dep) {\n        var from = args.from[dep] || '';\n        var to = versionUtil.colorizeDiff(args.to[dep] || '', args.from[dep]);\n        return [dep, from, 'â†’', to];\n    });\n    rows.forEach(function (row) { table.push(row); });\n    return table;\n}\n\n/**\n * @param args.current\n * @param args.upgraded\n * @param args.installed (optional)\n * @param args.latest (optional)\n * @param args.pkgFile (optional)\n * @param args.isUpgrade (optional)\n */\nfunction printUpgrades(args) {\n    print('');\n    if (_.isEmpty(args.upgraded)) {\n        var smiley = chalk.yellow(':)');\n        if(options.global) {\n            print('All global packages are up-to-date ' + smiley);\n        }\n        else {\n            print('All dependencies match the ' + (options.greatest ? 'greatest' : 'latest') + ' package versions ' + smiley);\n        }\n    } else {\n\n        // split the deps into satisfied and unsatisfied to display in two separate tables\n        var deps = Object.keys(args.upgraded);\n        var satisfied = cint.toObject(deps, function (dep) {\n          return cint.keyValue(dep, vm.isSatisfied(args.latest[dep], args.current[dep]));\n        });\n        var isSatisfied = _.propertyOf(satisfied);\n        var unsatisfiedUpgraded = cint.filterObject(args.upgraded, cint.not(isSatisfied));\n        var numUnsatisfied = Object.keys(unsatisfiedUpgraded).length;\n        var satisfiedUpgraded = cint.filterObject(args.upgraded, isSatisfied);\n\n        // print unsatisfied table\n        if (numUnsatisfied > 0) {\n            var unsatisfiedTable = toDependencyTable({\n                from: args.current,\n                to: unsatisfiedUpgraded\n            }, { greatest: options.greatest });\n            print(unsatisfiedTable.toString());\n        }\n\n        // filter out installed packages that match the latest\n        satisfiedUpgraded = cint.filterObject(satisfiedUpgraded, function (dep) {\n            return !args.latest || !args.installed || args.latest[dep] !== args.installed[dep];\n        });\n        var numSatisfied = Object.keys(satisfiedUpgraded).length;\n\n        // print satisfied table (if any exist)\n        if(numSatisfied > 0) {\n            var count = Object.keys(satisfiedUpgraded).length;\n            var satisfiedTable = toDependencyTable({\n                from: args.current,\n                to: satisfiedUpgraded\n            }, { greatest: options.greatest });\n            if (numUnsatisfied > 0) {\n                // adding some space between the unsatisfied to the satisfied\n                print('');\n            }\n            print('The following dependenc' + (count === 1 ? 'y is' : 'ies are') + ' satisfied by ' + (count === 1 ? 'its' : 'their') + ' declared version range, but the installed version' + (count === 1 ? ' is' : 's are') + ' behind. You can install the latest version' + (count === 1 ? '' : 's') + ' without modifying your bower.json by using ' + chalk.blue('bower update') + '. If you want to update the dependenc' + (count === 1 ? 'y' : 'ies') + ' in your bower.json anyway, use ' + chalk.blue('bcu --upgradeAll') + '.\\n');\n            print(satisfiedTable.toString());\n        }\n        if (numUnsatisfied > 0 && args.pkgFile && !args.isUpgrade) {\n             print('\\nRun with ' + chalk.blue('-u') + ' to upgrade your bower.json');\n         }\n    }\n    print('');\n}\n\n//\n// Program\n//\n\n\nfunction programInit() {\n\n    // 'upgradeAll' is a type of an upgrade so if it's set, we set 'upgrade' as well\n    options.upgrade = options.upgrade || options.upgradeAll;\n\n    if (options.global && options.upgrade) {\n        print(\"bower-check-updates cannot update global packages.\");\n        print(\"Run 'npm install -g [package]' to upgrade a global package.\");\n        process.exit(1);\n    }\n\n    // add shortcut for any keys that start with 'json'\n    options.json = _(options)\n        .keys()\n        .filter(_.partial(_.startsWith, _, 'json', 0))\n        .some(_.propertyOf(options));\n}\n\nfunction programRun() {\n    programInit();\n    return options.global ? programRunGlobal() : programRunLocal();\n}\n\nfunction programRunGlobal() {\n    return analyzeGlobalPackages();\n}\n\nfunction programRunLocal() {\n\n    var pkgData, pkgFile;\n\n    if(options.packageData) {\n        pkgData = Promise.resolve(options.packageData);\n    }\n    else if(!process.stdin.isTTY) {\n        pkgData = require('get-stdin-promise');\n        pkgFile = null; // this signals analyzeProjectDependencies to search for installed dependencies and to not print the upgrade message\n    }\n    else {\n        // find the closest descendant package\n        pkgFile = closestPackage.sync(process.cwd());\n        if (!fs.existsSync(pkgFile)) {\n            throw new Error('bower.json not found');\n        }\n\n        // print a message if we are using a descendant bower.json\n        var relPathToPackage = path.relative(process.cwd(), pkgFile);\n        if (relPathToPackage !== 'bower.json') {\n            print('Using ' + relPathToPackage);\n        }\n\n        pkgData = readPackageFile(pkgFile, null, false);\n    }\n\n    return pkgData.then(_.partial(analyzeProjectDependencies, _, pkgFile));\n}\n\nmodule.exports = _.merge({\n    run: function (opts) {\n        options = opts || {};\n\n        // if not executed on the command-line (i.e. executed as a node module), set some defaults\n        if(!options.cli) {\n            _.defaults(options, {\n                jsonUpgraded: true,\n                silent: true,\n                args: []\n            });\n        }\n\n        return vm.initialize(options.global).then(programRun);\n    }\n}, vm);\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/node_modules/bower-check-updates/lib/versionmanager.js":"var async = require('async');\nvar semver = require('semver');\nvar _ = require('lodash');\nvar cint = require('cint');\nvar semverutils = require('semver-utils');\nvar Promise = require('bluebird');\nvar npm = Promise.promisifyAll(require('npm'));\nvar versionUtil = require('./version-util.js');\n\n/**\n * For some reason, Promise.promisifyAll does not work on npm.commands :(\n *   Promise.promisifyAll(npm.commands);\n * So we have to do it manually.\n */\nfunction rawPromisify(obj) {\n    _.each(obj, function (method, name) {\n        obj[name + 'Async'] = function () {\n            var args = [].slice.call(arguments);\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                args.push(function (err, results) {\n                    if (err) reject(err);\n                    else resolve(results);\n                });\n                return method.apply(that, args);\n            })\n        }\n    })\n}\n\nvar npmIsInitialized = false;\n\n// keep order for setPrecision\nvar DEFAULT_WILDCARD = '^';\n\nvar regex = {\n    comparison: /[<>]=?/g\n};\n\n/** Creates a new object with only the properties of the given that are not undefined. */\nfunction pruned(obj) {\n    return _.pick(obj, cint.not(_.isUndefined))\n}\n\n/** Returns 'v' if the string starts with a v, otherwise returns empty string. */\nfunction v(str) {\n    return str && (str[0] === 'v' || str[1] === 'v') ? 'v' : '';\n}\n\n/**\n * Upgrade an existing dependency declaration to satisfy the latest version\n * @param declaration Current version declaration (e.g. \"1.2.x\")\n * @param latestVersion Latest version (e.g \"1.3.2\")\n * @returns {string} The upgraded dependency declaration (e.g. \"1.3.x\")\n */\nfunction upgradeDependencyDeclaration(declaration, latestVersion, options) {\n\n    options = options || {};\n    options.wildcard = options.wildcard || DEFAULT_WILDCARD;\n\n    // return global versionUtil.wildcards immediately\n    if(versionUtil.isWildCard(declaration)) {\n        return declaration;\n    }\n\n    // parse the latestVersion\n    // return original declaration if latestSemver is invalid\n    var latestSemver = semverutils.parseRange(latestVersion)[0];\n    if (!latestSemver) {\n        return declaration;\n    }\n\n    // parse the declaration\n    // if multiple ranges, use the semver with the least number of parts\n    var parsedRange = _(semverutils.parseRange(declaration))\n        .reject({ operator: '||' }) // semver-utils includes empty entries for the || operator. We can remove them completely.\n        .sortBy(function(range) {\n            return versionUtil.numParts(versionUtil.stringify(range));\n        })\n        .value();\n    var declaredSemver = parsedRange[0];\n\n    /**\n     * Chooses version parts between the declared version and the latest.\n     * Base parts (major, minor, patch) are only included if they are in the original declaration.\n     * Added parts (release, build) are always included. They are only present if we are checking --greatest versions anyway.\n    */\n    function chooseVersion(part) {\n        return versionUtil.isWildPart(declaredSemver[part]) ? declaredSemver[part] :\n            _.contains(versionUtil.VERSION_BASE_PARTS, part) && declaredSemver[part] ? latestSemver[part] :\n            _.contains(versionUtil.VERSION_ADDED_PARTS, part) ? latestSemver[part] :\n            undefined;\n    }\n\n    // create a new semver object with major, minor, patch, build, and release parts\n    var newSemver = cint.toObject(versionUtil.VERSION_PARTS, function (part) {\n        return cint.keyValue(part, chooseVersion(part));\n    });\n    var newSemverString = versionUtil.stringify(newSemver);\n    var version = v(declaredSemver.semver) + newSemverString;\n\n    // determine the operator\n    // do not compact, because [undefined, '<'] must be differentiated from ['<']\n    var uniqueOperators = _(parsedRange)\n        .pluck('operator')\n        .uniq()\n        .value();\n    var operator = uniqueOperators[0] || '';\n\n    var hasWildCard = versionUtil.WILDCARDS.some(_.partial(_.contains, newSemverString, _, 0));\n    var isLessThan = uniqueOperators[0] === '<' || uniqueOperators[0] === '<=';\n    var isMixed = uniqueOperators.length > 1;\n\n    // convert versions with </<= or mixed operators into the preferred wildcard\n    // only do so if the new version does not already contain a wildcard\n    return !hasWildCard && (isLessThan || isMixed) ?\n        versionUtil.addWildCard(version, options.wildcard) :\n        operator + version;\n}\n\n/**\n * Upgrade a dependencies collection based on latest available versions\n * @param currentDependencies current dependencies collection object\n * @param latestVersions latest available versions collection object\n * @returns {{}} upgraded dependency collection object\n */\nfunction upgradeDependencies(currentDependencies, latestVersions) {\n\n    // get the preferred wildcard and bind it to upgradeDependencyDeclaration\n    var wildcard = getPreferredWildcard(currentDependencies) || DEFAULT_WILDCARD;\n    var upgradeDep = _.partialRight(upgradeDependencyDeclaration, {\n        wildcard: wildcard\n    });\n\n    return _(currentDependencies)\n        // only include packages for which a latest version was fetched\n        .pick(function (current, packageName) {\n            return packageName in latestVersions;\n        })\n        // combine the current and latest dependency objects into a single object keyed by packageName and containing both versions in an array: [current, latest]\n        .mapValues(function (current, packageName) {\n            var latest = latestVersions[packageName];\n            return [current, latest];\n        })\n        // pick the packages that are upgradeable\n        // we can use spread because isUpgradeable and upgradeDependencyDeclaration both take current and latest as arguments\n        .pick(_.spread(isUpgradeable))\n        .mapValues(_.spread(upgradeDep))\n        .value();\n}\n\n// Determines if the given version (range) should be upgraded to the latest (i.e. it is valid, it does not currently satisfy the latest, and it is not beyond the latest)\nfunction isUpgradeable(current, latest) {\n\n    // do not upgrade non-npm version declarations (such as git tags)\n    // do not upgrade versionUtil.wildcards\n    if(!semver.validRange(current) || versionUtil.isWildCard(current)) {\n        return false;\n    }\n\n    // remove the constraint (e.g. ^1.0.1 -> 1.0.1) to allow upgrades that satisfy the range, but are out of date\n    var version = versionUtil.stringify(semverutils.parseRange(current)[0]);\n\n    // make sure it is a valid range\n    // not upgradeable if the latest version satisfies the current range\n    // not upgradeable if the specified version is newer than the latest (indicating a prerelease version)\n    return !!semver.validRange(version)\n        && !isSatisfied(latest, version)\n        && !semver.ltr(latest, version);\n}\n\n// Return true if the version satisfies the range\nvar isSatisfied = semver.satisfies;\n\n\n/**\n * Creates a filter function from a given filter string. Supports strings, arrays of strings, or regexes.\n */\nfunction packageNameFilter(filter) {\n\n    var filterPackages;\n\n    // no filter\n    if (!filter) {\n        filterPackages = _.identity;\n    }\n    else if(typeof filter === 'string') {\n        // RegExp filter\n        if(filter[0] === '/' && cint.index(filter,-1) === '/') {\n            var regexp = new RegExp(filter.slice(1, filter.length-1));\n            filterPackages = regexp.test.bind(regexp);\n        }\n        // string filter\n        else {\n            var packages = filter.split(/[\\s,]+/);\n            filterPackages = _.contains.bind(_, packages);\n        }\n    }\n    // array filter\n    else if (Array.isArray(filter)) {\n        filterPackages = _.contains.bind(_, filter);\n    }\n    // raw RegExp\n    else if(filter instanceof RegExp) {\n        filterPackages = filter.test.bind(filter);\n    }\n    else {\n        throw new Error('Invalid packages filter. Must be a RegExp, array, or comma-or-space-delimited list.');\n    }\n\n    // (limit the arity to 1 to avoid passing the value)\n    return cint.aritize(filterPackages, 1);\n}\n\n/**\n * Upgrade the dependency declarations in the package data\n * @param pkgData The bower.json data, as utf8 text\n * @param oldDependencies Object of old dependencies {package: range}\n * @param newDependencies Object of new dependencies {package: range}\n * @param newVersions Object of new versions {package: version}\n * @returns {string} The updated package data, as utf8 text\n */\nfunction updatePackageData(pkgData, oldDependencies, newDependencies, newVersions, options) {\n\n    options = options || {};\n    var upgradeAll = options.upgradeAll;\n\n    for (var dependency in newDependencies) {\n        if (upgradeAll || !isSatisfied(newVersions[dependency], oldDependencies[dependency])) {\n            var expression = '\"' + dependency + '\"\\\\s*:\\\\s*\"' + escapeRegexp(oldDependencies[dependency] + '\"');\n            var regExp = new RegExp(expression, \"g\");\n            pkgData = pkgData.replace(regExp, '\"' + dependency + '\": ' + '\"' + newDependencies[dependency] + '\"');\n        }\n    }\n\n    return pkgData;\n}\n\n/**\n * Get the current dependencies from the package file\n * @param pkg Object with dependencies, devDependencies, and/or optionalDependencies properties\n * @param options.filter List or regex of package names to search\n * @param options.prod\n * @param options.dev\n * @returns Promised {packageName: version} collection\n */\nfunction getCurrentDependencies(pkg, options) {\n\n    pkg = pkg || {};\n    options = options || {};\n\n    if(!options.prod && !options.dev && !options.optional) {\n        options.prod = options.dev = options.optional = true;\n    }\n\n    var allDependencies = cint.filterObject(_.merge({},\n        options.prod && pkg.dependencies,\n        options.dev && pkg.devDependencies,\n        options.optional && pkg.optionalDependencies\n    ), packageNameFilter(options.filter));\n\n    return allDependencies;\n}\n\nfunction getInstalledPackages() {\n    return npm.commands.listAsync([], true)\n        .then(function (results) {\n            var packageList = results.dependencies;\n            if (!packageList) {\n                throw new Error(\"Unable to retrieve NPM package list\");\n            }\n\n            var globalPackages = {};\n            for (var package in packageList) {\n                if(packageList[package] !== \"*\") {\n                    globalPackages[packageList[package].name] = packageList[package].version;\n                }\n            }\n\n            return globalPackages;\n        });\n}\n\n/**\n * Wraps npm.commands.view with some error handling and a nicer output.\n * @param packageName   Name of the package to jquery\n * @param field         Field such as \"versions\" or \"dist-tags.latest\" accepted by npm.commands.view (https://docs.npmjs.com/api/view)\n * @Returns info\n */\nfunction npmView(packageName, field) {\n    if (!npmIsInitialized) {\n        throw new Error(\"initialize must be called before using the version manager\");\n    }\n\n    return npm.commands.viewAsync([packageName, field], true)\n        .then(function (response) {\n            return _.values(response)[0][field];\n        });\n}\n\n/**\n * Query the latest version of a package\n * @param packageName The name of the package to query\n * @returns version\n */\nvar getLatestPackageVersion = cint.partialAt(npmView, 1, 'dist-tags.latest');\nvar getPackageVersions = cint.partialAt(npmView, 1, 'versions');\n\nfunction getGreatestPackageVersion(packages) {\n    return getPackageVersions(packages).then(_.last);\n}\n\n/**\n * Get the latest versions from the NPM repository\n * @param packageList   A list of package names to query\n * @param options       Options. Default: { versionTarget: 'latest' }. You may also specify { versionTarge: 'greatest' }\n * @returns             Promised {packageName: version} collection\n */\nfunction getLatestVersions(packageList, options) {\n\n    options = options || {};\n\n    // configure registry\n    if (options.registry) {\n        npm.config.set('registry', options.registry);\n    }\n\n    // validate options.versionTarget\n    options.versionTarget = options.versionTarget || 'latest';\n\n    // determine the getPackageVersions function from options.versionTarget\n    switch (options.versionTarget) {\n        case('latest'):\n            getPackageVersion = getLatestPackageVersion;\n            break;\n        case('greatest'):\n            getPackageVersion = getGreatestPackageVersion;\n            break;\n        default:\n            var supportedVersionTargets = ['latest', 'greatest'];\n            return Promise.reject('Unsupported versionTarget: ' + options.versionTarget + '. Supported version targets are: ' + supportedVersionTargets);\n    }\n\n    // TODO: It would be better here to create an object of promised versions, keyed by the package name, instead of an array. This should make the final _.pick unnecessary and subsequently allow the whole PromiseInspection logic to be generalized\n\n    return Promise.settle(packageList.map(getPackageVersion))\n        // convert the array of versions to a nicer object keyed by package name\n        .then(function (versions) {\n            return Promise.map(versions, function (version) {\n                if (version.isRejected()) {\n                    var reason = version.reason();\n                    if(reason.statusCode === 404 || reason == '404' || reason === '404 Not Found') {\n                        return null;\n                    }\n                    else {\n                        throw new Error(reason);\n                    }\n                }\n                else {\n                    return version.value();\n                }\n            });\n        })\n        .then(function (versions) {\n            return cint.toObject(versions, function (version, i) {\n                return cint.keyValue(packageList[i], version);\n            });\n        })\n        .then(_.partialRight(_.pick, _.identity))\n}\n\n/**\n * Given a dependencies collection, returns whether the user prefers ^, ~, .*, or .x (simply counts the greatest number of occurences). Returns null if given no dependencies.\n */\nfunction getPreferredWildcard(dependencies) {\n\n    // if there are no dependencies, return null.\n    if(Object.keys(dependencies).length === 0) {\n        return null;\n    }\n\n    // group the dependencies by wildcard\n    var groups = _.groupBy(_.values(dependencies), function(dep) {\n        return _.find(versionUtil.WILDCARDS, function(wildcard) {\n            return dep.indexOf(wildcard) > -1;\n        });\n    });\n\n    // if none of the dependencies use a wildcard, return null\n    var usedWildcards = Object.keys(groups);\n    if(usedWildcards.length === 1 && usedWildcards[0] === 'undefined') {\n        return null;\n    }\n\n    // convert to an array of objects that can be sorted\n    var arrOfGroups = cint.toArray(groups, function (wildcard, instances) {\n        return {\n            wildcard: wildcard,\n            instances: instances\n        };\n    });\n\n    // reverse sort the groups so that the wildcard with the most appearances is at the head, then return it.\n    var sorted = _.sortBy(arrOfGroups, function (wildcardObject) {\n        return -wildcardObject.instances.length;\n    });\n\n    return sorted[0].wildcard;\n}\n\n/**\n * Initialize the version manager\n * @returns\n */\nfunction initialize(global) {\n\n    return npm.loadAsync({silent: true, global: global})\n        .then(function () {\n            rawPromisify(npm.commands);\n            return npmIsInitialized = true;\n        });\n}\n\n//\n// Helper functions\n//\n\nfunction escapeRegexp(s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'); // Thanks Stack Overflow!\n}\n\n//\n// API\n//\n\nmodule.exports = {\n    initialize:                   initialize,\n    upgradeDependencyDeclaration: upgradeDependencyDeclaration,\n    updatePackageData:            updatePackageData,\n    getCurrentDependencies:       getCurrentDependencies,\n    upgradeDependencies:          upgradeDependencies,\n    getInstalledPackages:         getInstalledPackages,\n    getLatestPackageVersion:      getLatestPackageVersion,\n    getGreatestPackageVersion:    getGreatestPackageVersion,\n    getLatestVersions:            getLatestVersions,\n    isUpgradeable:                isUpgradeable,\n    isSatisfied:                  isSatisfied,\n    getPreferredWildcard:         getPreferredWildcard\n}\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/node_modules/bower-check-updates/node_modules/semver-utils/semver-utils.js":"(function () {\n  \"use strict\";\n\n  // TODO break these down into escaped strings with meaningful comments and create using new RegExp()\n  //               |optional 'v'\n  //               | | 3 segment version\n  //               | |                    |optional release prefixed by '-'\n  //               | |                    |                                        |optional build prefixed by '+'\n  var reSemver = /^v?((\\d+)\\.(\\d+)\\.(\\d+))(?:-([\\dA-Za-z\\-]+(?:\\.[\\dA-Za-z\\-]+)*))?(?:\\+([\\dA-Za-z\\-]+(?:\\.[\\dA-Za-z\\-]+)*))?$/\n    //, reSemverRange = /\\s*((\\|\\||\\-)|(([<>~]?=?)\\s*(v)?([0-9]+)(\\.(x|[0-9]+))?(\\.(x|[0-9]+))?(([\\-+])([a-zA-Z0-9\\.]+))?))\\s*/g\n    , reSemverRange = /\\s*((\\|\\||\\-)|(([<>~^]?=?)\\s*(v)?([0-9]+)(\\.(x|\\*|[0-9]+))?(\\.(x|\\*|[0-9]+))?(([\\-+])([a-zA-Z0-9\\.-]+))?))\\s*/g\n    ;\n\n  // Returns a new object with all of the undefined properties removed from the given object\n  function pruned(obj) {\n    var o = {};\n    for(var key in obj) {\n      if ('undefined' !== typeof obj[key]) {\n        o[key] = obj[key];\n      }\n    }\n    return o;\n  }\n\n  function stringifySemver(obj) {\n    var str = ''\n      ;\n\n    str += obj.major || '0';\n    str += '.';\n    str += obj.minor || '0';\n    str += '.';\n    str += obj.patch || '0';\n    if (obj.release) {\n      str += '-' + obj.release;\n    }\n    if (obj.build) {\n      str += '+' + obj.build;\n    }\n    return str;\n  }\n\n  function stringifySemverRange(arr) {\n    var str = ''\n      ;\n\n    function stringify(ver) {\n      if (ver.operator) {\n        str += ver.operator + ' ';\n      }\n      if (ver.major) {\n        str += ver.toString() + ' ';\n      }\n    }\n\n    arr.forEach(stringify);\n\n    return str.trim();\n  }\n\n  function SemVer(obj) {\n    if (!obj) {\n      return;\n    }\n\n    var me = this\n      ;\n\n    Object.keys(obj).forEach(function (key) {\n      me[key] = obj[key];\n    });\n  }\n  SemVer.prototype.toString = function () {\n    return stringifySemver(this);\n  };\n\n  /*\n  function SemVerRange(obj) {\n    if (!obj) {\n      return;\n    }\n\n    var me = this\n      ;\n\n    Object.keys(obj).forEach(function (key) {\n      me[key] = obj[key];\n    });\n  }\n  SemVerRange.prototype = [];\n  SemVerRange.prototype.toString = stringifySemverRange;\n  */\n\n  function parseSemver(version) {\n    // semver, major, minor, patch\n    // https://github.com/mojombo/semver/issues/32\n    // https://github.com/isaacs/node-semver/issues/10\n    // optional v\n    var m = reSemver.exec(version) || []\n      , ver = new SemVer(pruned({\n            semver: m[0]\n          , version: m[1]\n          , major: m[2]\n          , minor: m[3]\n          , patch: m[4]\n          , release: m[5]\n          , build: m[6]\n        }))\n      ;\n\n    if (0 === m.length) {\n      ver = null;\n    }\n\n    return ver;\n  }\n\n  function parseSemverRange(str) {\n    var m\n      , arr = []\n      , obj\n      ;\n\n\n    while (m = reSemverRange.exec(str)) {\n      obj = {\n          semver: m[3]\n        , operator: m[4] || m[2]\n        , major: m[6]\n        , minor: m[8]\n        , patch: m[10]\n      };\n      if ('+' === m[12]) {\n        obj.build = m[13];\n      }\n      if ('-' === m[12]) {\n        obj.release = m[13];\n      }\n      arr.push(new SemVer(pruned(obj)));\n      //console.log(m);\n    }\n\n    //return new SemVerRange(arr);\n    return arr;\n  }\n\n  module.exports.parse = parseSemver;\n  module.exports.stringify = stringifySemver;\n  module.exports.parseRange = parseSemverRange;\n  module.exports.stringifyRange = stringifySemverRange;\n}());\n","/home/travis/build/npmtest/node-npmtest-bower-check-updates/node_modules/bower-check-updates/lib/version-util.js":"var semverutils = require('semver-utils');\nvar _ = require('lodash');\nvar chalk = require('chalk');\nvar util = require('util');\n\nvar VERSION_BASE_PARTS = ['major', 'minor', 'patch'];\nvar VERSION_ADDED_PARTS = ['release', 'build'];\nvar VERSION_PARTS = [].concat(VERSION_BASE_PARTS, VERSION_ADDED_PARTS);\nvar VERSION_PART_DELIM = {\n    major : '',\n    minor : '.',\n    patch : '.',\n    release : '-',\n    build : '+'\n};\nvar WILDCARDS = ['^', '~', '.*', '.x'];\nvar WILDCARDS_PURE = ['^', '~', '*'];\nvar WILDCARD_PURE_REGEX = new RegExp('^[' + WILDCARDS_PURE.join('').replace('^', '\\\\^') + ']$');\n\n/**\n * Returns the number of parts in the version\n */\nfunction numParts(version) {\n\n    var semver = semverutils.parseRange(version)[0];\n\n    if(!semver) {\n        throw new Error(util.format('semverutils.parseRange returned null when trying to parse \"%s\". This is probably a problem with the \"semver-utils\" dependency. Please report an issue at https://github.com/se-panfilov/bower-check-updates/issues.', version))\n    }\n\n    return _.intersection(VERSION_PARTS, Object.keys(semver)).length;\n}\n\n/**\n * Increases or decreases the given precision by the given amount, e.g. major+1 -> minor\n */\nfunction precisionAdd(precision, n) {\n\n    if(n === 0) { return precision; }\n\n    var index = n === 0 ? precision :\n        _.contains(VERSION_BASE_PARTS, precision) ? VERSION_BASE_PARTS.indexOf(precision) + n :\n        _.contains(VERSION_ADDED_PARTS, precision) ? VERSION_BASE_PARTS.length + n :\n        null;\n\n    if(index === null) {\n        throw new Error('Invalid precision: ' + precision);\n    }\n    else if(!VERSION_PARTS[index]) {\n        throw new Error('Invalid precision math' + arguments);\n    }\n\n    return VERSION_PARTS[index];\n}\n\n/** Joins the major, minor, patch, release, and build parts (controlled by an optional precision arg) of a semver object into a dot-delimited string. */\nfunction stringify(semver, precision) {\n\n    // get a list of the parts up until (and including) the given precision\n    // or all of them, if no precision is specified\n    var parts = precision ? VERSION_PARTS.slice(0, VERSION_PARTS.indexOf(precision)+1) : VERSION_PARTS;\n\n    // pair each part with its delimiter and join together\n    return parts\n        .filter(function(part) {\n            return _.contains(VERSION_BASE_PARTS, precision) || semver[part];\n        })\n        .map(function(part) {\n            return VERSION_PART_DELIM[part] + (semver[part] || '0');\n        })\n        .join('');\n}\n\n/**\n * Gets how precise this version number is (major, minor, patch, release, or build)\n */\nfunction getPrecision(version) {\n    var semver = semverutils.parseRange(version)[0];\n    // expects VERSION_PARTS to be in correct order\n    return _.find(VERSION_PARTS.slice().reverse(), _.propertyOf(semver));\n}\n\n/**\n * Sets the precision of a (loose) semver to the specified level: major, minor, etc.\n */\nfunction setPrecision(version, precision) {\n    var semver = semverutils.parseRange(version)[0];\n    return stringify(semver, precision);\n}\n\n/** Adds a given wildcard (^,~,.*,.x) to a version number. Adds ^ and ~ to the beginning. Replaces everything after the major version number with .* or .x */\nfunction addWildCard(version, wildcard) {\n    return wildcard === '^' || wildcard === '~' ?\n        wildcard + version :\n        setPrecision(version, 'major') + wildcard;\n}\n\n/** Returns true if the given string is one of the wild cards. */\nfunction isWildCard(version) {\n    return WILDCARD_PURE_REGEX.test(version);\n}\n\n/** Returns true if the given digit is a wildcard for a part of a version. */\nfunction isWildPart(versionPart) {\n    return versionPart === '*' || versionPart === 'x';\n}\n\n/**\n * Colorize the parts of a version string that are different than a given string to compare to. Assumes that the two verson strings are in the same format.\n */\nfunction colorizeDiff(strToColor, strToCompare, options) {\n\n    var options = options || {};\n    options.color = options.color || 'green';\n    var leadingWildcard = '';\n\n    // separate out leading ^ or ~\n    if(/^[~^]/.test(strToColor) && strToColor[0] === strToCompare[0]) {\n        leadingWildcard = strToColor[0];\n        strToColor = strToColor.slice(1);\n        strToCompare = strToCompare.slice(1);\n    }\n\n    // split into parts\n    var partsToColor = strToColor.split('.');\n    var partsToCompare = strToCompare.split('.');\n\n    var i = _.findIndex(partsToColor, function (part, i) {\n      return part !== partsToCompare[i];\n    });\n    i = i >= 0 ? i : partsToColor.length;\n\n    // if we are colorizing only part of the word, add a dot in the middle\n    var middot = i > 0 && i < partsToColor.length ? '.' : '';\n\n    return leadingWildcard +\n        partsToColor.slice(0,i).join('.') +\n        middot +\n        chalk[options.color](partsToColor.slice(i).join('.'));\n}\n\nmodule.exports = {\n    numParts:            numParts,\n    stringify:           stringify,\n    precisionAdd:        precisionAdd,\n    getPrecision:        getPrecision,\n    setPrecision:        setPrecision,\n    addWildCard:         addWildCard,\n    isWildCard:          isWildCard,\n    isWildPart:          isWildPart,\n    colorizeDiff:        colorizeDiff,\n    VERSION_BASE_PARTS:  VERSION_BASE_PARTS,\n    VERSION_ADDED_PARTS: VERSION_ADDED_PARTS,\n    VERSION_PARTS:       VERSION_PARTS,\n    WILDCARDS:           WILDCARDS\n};\n"}